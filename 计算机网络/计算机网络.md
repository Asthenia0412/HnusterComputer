>日期：2023-2-1
>
>作者：lyfive

第一章:三种交换方式与时延一起考，性能指标，服务协议实体之间的关系，分层
第二章:什么斯特和香浓的两个公式，不同情况适用范围，码分复用
第三章:链路层三个基本问题，透明传输，循环冗余码，csma协议（理解某场景算法执行过程）
第四章:子网划分，ip地址，地址块构建超网，路由表更新（重点，最短路径，距离下标）
第五章:可靠传输，uzi控制?，拥塞避免，慢开始，tcp连接释放三报文四握手
第六章应用层协议，url，http，邮件协议
第七章和第六章6分左右

## 一、题型

1. 选择题（30分）：单选+多选，单选1分$\times$20、多选2分$\times$5 
2. 简答题（20分）：5分$\times$4
3. 分析计算题（40分）：10分$\times$4
4. 论述题（10分）：10分$\times$1



## 二、核心考点

### 第一章：概述

1. 互联网的组成：边缘部分（资源子网）和核心部分（通信子网）

2. 互联网边缘部分的通信方式：C/S模式和P2P模式

3. 交换技术

   1. 电路交换步骤：建立连接（占用通信资源）-> 通话（一直占用通信资源）-> 释放连接（归还通信资源）
      特点：在通话的全部时间内，通话的两个用户始终占用端到端的通信资源；
      用于传送计算机数据时，线路的传输效率往往很低。
   2. 分组交换步骤：把一个报文划分为几个分组后再进行传送。
      优点：在分组传输的过程中动态分配传输带宽，对通信链路逐段占用（高效）、为每一个分组独立地选择最合适的转发路由（灵活）、以分组作为传送单位，不先建立连接就能向其他主机发送分组（迅速）、保证可靠性的网络协议，分布式多路由的分组交换网，使网络有很好的生存性（可靠）
   3. 报文交换步骤：将整个报文直接进行传送。

   电路交换-整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。
   报文交换-整个报文先传送到相邻节点，全部存储下来后查找转发表，转发到下一个节点。
   分组交换-单个分组（报文的一部分）传送到相邻节点，存储下来后查找转发表，转发到下一个节点。
   若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。

   报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。

   由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性。

4. 互联网核心部分向边缘部分的大量主机提供**连通性**。互联网是一个**远程分组交换网络**，所以采用的是**分组交换技术**。
   分组交换的特点主要有：

   1. 节点暂时存储的是一个个分组，而不是整个数据文件。
   2. 分组暂时保存在节点的内存中，保证了较高的交换速率。
   3. 动态分配信道，极打的提高了通信线路的利用率。

   不足主要有：

   1. 分组在节点转发因排队而造成一定的延时
   2. 分组必须携带一些控制信息（首部）而产生额外开销，管理控制比较困难。

5. 计算机网络的定义：由自治的计算机互联起来的集合体。
   书上的定义：计算机网络主要是一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。

6. 计算机网络的分类：按作用范围（广域网WAN、城域网MAN、局域网LAN、个人区域网PAN等）；按使用者（公用网、专用网）

7. 计算机网络的性能指标：

   1. 速率：数据的传送速率，也称为数据率或比特率。单位（bit/s或写作b/s、bps）k->M->G->T->P（按1000倍不是1024倍）
   2. 带宽：通道传送数据的能力，表示单位时间内网络中某信道所能通过的“最高数据率”。单位（bit/s）
   3. 吞吐量：表示在单位时间内通过某个网络（或信道、接口）的实际数据量。单位（bit/s）
   4. **时延**：指数据从网络的一端传送到另一端所需的时间。

      > 需要重点掌握各种时延的计算

      - 发送（传输）时延：主机或路由器发送数据帧所需要的时间，从发送数据帧的第一个比特算起，到该帧最后一个比特发送完毕所需的时间。
        $发送时延=\frac{数据帧长度(bit)}{发送速率(bit/s)}$（发送速率一般是信道带宽）
      - 传播时延：电磁波在信道中传播一定的距离需要花费的时间。电磁波在自由空间的传播速率是光速$3.0\times10^5km/s$，在铜线电缆中是$2.3\times10^5km/s$，在光纤是$2.0\times10^5km/s$（常计算）。
        $传播时延=\frac{信道长度(m)}{电磁波在信道上的传播速率(m/s)}$
      - 处理时延：主机或路由器在收到分组时要花费一定的时间进行处理所花费的时间。
      - 排队时延：分组在经过网络传输时，要经过许多路由器，分组在进入路由器后要先在输入队列中排队等待处理的时间。
      - 总时延=发送时延+传播时延+处理时延（一般不处理）+排队时延（一般不处理）
        ![image-20230208195440716](计算机网络.assets/image-20230208195440716.png)

   5. 时延带宽积：$时延带宽积=传播时延(s)\times带宽(bit/s)$ ，又称以比特为单位的链路长度。
      A-B光纤链路，长1km，带宽1Gb/s：$\frac{1km}{2\times10^5km/s}\times1Gb/s=5kb$

   6. **往返时间RTT**：表示从发送端发送数据开始，到发送端收到来自接收端的确认（接收端收到数据后便立即发送确认），总共经历的时延。
      影响因素：链路的传播时间、末端系统的处理时间以及路由器的排队时间。
      RTT的变化主要由路由器的排队时间影响，因此RTT反映了网络拥堵程度的变化。
      $有效数据率=\frac{数据长度(bit)}{发送时间+RTT(s)}$

   7. **利用率**：①信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）②网络利用率是全网络的信道利用率的加权平均值。
      概念解析：信道利用率或网络利用率过高就会产生非常大的时延。（一般控制不超过50%）
      $空闲时延D_0，网络利用率U，则有时延D=\frac{D_0}{1-U}$

8. **OSI七层协议体系结构、TCP/IP四层体系结构和综合的五层体系结构**
   ![image-20230206162314314](计算机网络.assets/image-20230206162314314.png)

   1. 应用层：通过应用进程间的交互来完成特定网络应用。应用层交换的数据单元为**报文(message)**
   2. 运输层：负责向两台主机中进程之间的通信提供通用的数据传输服务。有TCP和UDP两种协议。
      - 传输控制协议TCP：提供**面向连接的、可靠的**数据传输服务，其数据传输的单位是**报文段(segment)**。
      - 用户数据报协议UDP：提供**无连接的尽最大努力的**数据传输服务（不保证数据传输的可靠性），其数据传输的单位是**用户数据报**。
   3. 网络层：负责为分组交换网上的不同主机提供通信服务。发送数据时，网络层把运输层产生的报文段或用户数据报封装成**分组或包**进行传送。由于网络层使用IP协议，因此分组也叫做**IP数据报、数据报**。
   4. 数据链路层：将网络层交下来的IP数据报组装成**帧**，在两个相邻节点间的链路上传送帧。传送的单位是**帧**
   5. 物理层：传输比特流数据。单位为**比特**

9. 协议是控制两个对等实体在“水平方向”进行“逻辑通信”的规则的集合。
   协议的三要素

   - 语法：定义所交换信息的格式
   - 语义：定义通信双方所要完成的操作
   - 同步：定义通信双方的时序关系

   协议与服务的区别：①协议是“水平”的，即控制对等实体之间通信的规则；服务是“垂直”的，即服务是由下层向上层通过间接口提供的。
   ②实体看得见下层提供的服务，但并不知道实现该服务的具体协议。下层的协议对上层的实体是“透明”的。



### 第二章：物理层

1. **物理层的主要任务**就是确定与传输媒体的接口有关的一些特性。

   - 机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。
   - 电气特性：指明在接口电缆的各条线上出现的电压的范围。
   - 功能特性：指明某条线上出现的某一电平的电压的意义。
   - 过程特性：指明对于不同功能的各种可能事件的出现顺序。

2. 通信双方信息交互的**主要方式**

   - 单向通信：又称为单工通信，即只能有一个方向的通信而没有反方向的交互。如无线电广播或有线电广播以及电视广播
   - 双向交替通信：又称为半双工通信，即通信的双方都可以发送信息，但不能双方同时发送（接收）。这种通信方式是一方发送另一方接收。
   - 双向同时通信：又称为全双工通信，即通信的双方可以同时发送和接收信息。
     单向通信只需要一条信道，双向交替、双向同时通信需要两条。双向同时通信的传输效率最高。

3. 比特速率和码元速率

   - QAM：又称正交双边带调制。在多电平时，就构成了多进制正交幅度调制（MQAM）
   - 基本公式（数据通信的）：
     - M：代表M星点数，M值越大，星点数越多、频带利用率就越高、星点的空间距离越小、系统的抗干扰能力下降、误码率越高。
     - **电平数**：$n = \sqrt{M}$（n电平代表n进制），在**计算机网络**里$若有X个相位，Y种振幅，则n=XY$
     - **码元比特数**：$k=log_2n=log_2\sqrt{M}=\frac{1}{2}log_2M，k=log_2n=log_2XY$
     - **码元速率（调制速率）**：$f_s$
     - **带宽**：$B$
   - 码元速率与比特速率：$f_b=f_slog_2n=kf_s$，即一个码元由k个比特组成，比特速率就是码元速率的k倍

4. 信道的极限速率

   - 影响信道最大传输速率的**因素**：①信道能够通过的频率范围②信噪比
   - 奈氏准则：在带宽为W(Hz)的低通信道中，若不考虑噪声影响，则码元传输的最高速率是2W（码元/秒）。
   - $信噪比(dB) = 10log_{10}(\frac{S}{N})$，S/N即信号的平均功率和噪声的平均功率之比
   - 香农公式：$设带宽为W，信噪比为S/N，信道的极限信息传输速率C=Wlog_2(1+\frac{S}{N})(bit/s)$。
   - **需要注意2W单位是码元/秒，香农公式是bit/s**
     若链路带宽为3kHz，采用4个相位、每个相位有4种振幅的QAM调制，则链路的最大传输速率
     $f_s=2W=6k(码元/秒)，n=4*4，故f_b=f_s*log_2n=6k*4=24kbit/s$
   - **香农公式的意义**：告诫工程人员，在有噪声的实际信道上，不论采用多么复杂的编码技术，都不可能突破公式给出的信息传输速率的绝对极限。

5. 常用的**信道利用技术**

   - 频分复用：在同样的时间占用不同的带宽资源（这里的带宽指频率带宽）。如有N路信号要在一个信道中传送，可以使用调制的方法，把各路信号分别搬移到适当的频率位置，使彼此不产生干扰。
   - 时分复用：所有用户在不同的时间占用同样的频带宽度。是将时间划分为一段段等长的时分复用帧（即TDM帧）。每一路信号在每一个TDM帧中占用固定序号的时隙。（时分复用更利于数字信号的传输）
   - 统计时分复用：使用STDM帧来传送复用的数据，根据用户实际需要动态分配时长。（可能会有间隙）
   - 波分复用：光的频分复用。
   - **码分复用：**将每个比特时间划分为m个更短的时间片，称为码片（m通常取值为64/128），每个站点都被指派一个唯一的m比特码片序列。若某个站要发送比特1，则发送它自己的m比特码片序列；若要发送0，则发送它自己的m比特码片序列的反码。

6. 码分复用计算
   发送原理：向量叠加，发送A+B+C...（向量加法）
   ![image-20230208000156136](计算机网络.assets/image-20230208000156136.png)

   接收原理：向量积，即根据码片划分任意两个码片向量一定在m维空间“垂直”即向量积为0。（即要求$\vec{B} \neq -\vec{A}$
   接收$(A+B+C...)A=AA+BA+CA+...=AA=|A|$

   接收$(-A+B+C...)A=-AA+BA+CA+...=-AA=-|A|$![image-20230207235926406](计算机网络.assets/image-20230207235926406.png)
   ![image-20230208000851854](计算机网络.assets/image-20230208000851854.png)



### 第三章：数据链路层

1. 数据链路层的功能：在两个网络实体之间提供数据链路连接的创建、维持和释放管理。数据链路提供的是一种无连接的最大努力交付的服务，即**无连接不可靠**的服务。
2. 数据链路层的三个基本问题（原因、解决方法）
   - 封装成帧：封装成帧就是在一段数据前后分别添加首部和尾部。接收端以便从收到的比特流中识别帧的开始与结束，**帧定界是分组交换的必然要求**。
     使用特殊的帧定界符，控制字符SOH（0x01）放在一帧的最前面，表示帧的首部开始；另一外控制字符EOT（0x04）表示帧的结束。
   - 透明传输：透明传输避免消息符号与帧定界符号相混淆。（透明：某一个实际存在的事物看起来却好像不存在）
     当发送数据出现帧定界符SOH或EOT，则在SOH、EOT前插入一个转义字符“ESC”（0x1B），当数据出现转义字符同样在“ESC”前添加一个ESC。当接收端收到连续的两个转义字符时，就删除其中前面的一个。
   - 差错检测：差错检测防止差错的无效数据帧，浪费网络资源。
     使用循环冗余检测CRC
3. CRC的计算和理解
   - 构造冗余码：对于传送的数据M，首先用二进制的模2运算（相当于除法相减时每一位进行异或）进行$2^n$乘M的运算，相当于在M后添加n个0。再使用$2^nM$除以事先规定长度为n+1位的除数P，最终得到n位的余数R作为冗余码添加在M后。此时MR被称为帧检测序列FCS。
     ![img](计算机网络.assets/v2-89e5f57764d1927a24cdc43d58cf7ff7_1440w.jpeg)
   - CRC检测：除数P，用P(X)多项式表示。如P=1101，则$P(X)=X^3+X^2+1$。在接收到帧数据后，对每个帧再进行模2运算除以P，得到余数R。若R=0，则判定这个帧没有差错，否则则判定这个帧出现差错（但无法修正）。
     ![image-20230208204450984](计算机网络.assets/image-20230208204450984.png)
4. 数据链路层使用的两种信道及对应协议
   - 点对点信道：使用一对一的点对点通信方式，使用点对点协议PPP。
   - 广播信道：使用一对多的广播通信释放，使用专用的共享信道协议CSMA/CD协议。
5. 同步传输和异步传输的区别
   1. 异步传输面向字符的传输，传输单位为字符（8bit）。同步传输时面向比特的传输，传输单位是帧（大小不固定）。
   2. 异步传输通过字符的开始码和停止码抓住再同步的机会，而同步传输则是从前同步码中抽取同步信息。
   3. 异步传输每个字符中要多传递2比特信息，总传输负责量增加不少，传输效率比同步传输效率低。异步传输对于那些数据传输量的高速设备而言，增加了不少传输率。因此，适合用于传输量较小的低速设备。



### 第四章：网络层

1. 为什么需要网络层：对于互联网而言，仅实现数据链路层和物理层不能实现数据报在互联网中各网络之间传输。网络层的主要任务是实现网络互联，进而实现数据包在各网络之间的传输。

2. 网络的主要功能有哪些：数据通信、资源共享、分布式处理

3. 网络层有哪些协议：IP协议（网际协议），ICMP协议（Internet互联网控制报文协议）以及IGMP协议（Internet组管理协议）

4. 网络层向上提供的服务有哪两种？它们有什么区别？
   ![image-20230209203734843](计算机网络.assets/image-20230209203734843.png)

5. 基于TCP/IP体系结构的因特网的网际层提供的是**简单灵活、无连接的、尽最大努力交付**的数据报服务。

6. 什么是直接交付和间接交付？它们分别用在什么场合？

   - 直接交付：发送站与目的站在同一网段内，不涉及路由器。机器在同一网络上。
   - 间接交付：发送站与目的站不在同一网段内，间接交付的最后一个路由器肯定是直接交付。机器不在用一网络上。

7. 分类编址的IPv4地址

   ![image-20230209204224568](计算机网络.assets/image-20230209204224568.png)

8. 各类地址包含的网络数和主机数
   ![image-20230209204722074](计算机网络.assets/image-20230209204722074.png)
   ![image-20230209204927534](计算机网络.assets/image-20230209204927534.png)
   ![image-20230209205204164](计算机网络.assets/image-20230209205204164.png)
   ![image-20230209205414403](计算机网络.assets/image-20230209205414403.png)
   ![image-20230209205547781](计算机网络.assets/image-20230209205547781.png)

9. 划分子网

   >习题4-33

   ![image-20230209213110661](计算机网络.assets/image-20230209213110661.png)
   ![image-20230209213209359](计算机网络.assets/image-20230209213209359.png)

10. 无分类编制、CIDR构造超网

    > 习题4-25/26

    ![image-20230209213816523](计算机网络.assets/image-20230209213816523.png)
    ![image-20230209214105650](计算机网络.assets/image-20230209214105650.png)
    ![image-20230209214627629](计算机网络.assets/image-20230209214627629.png)

    
